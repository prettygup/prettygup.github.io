search:
  context: &context
    $ref: "./context.yaml"
  message:
    intent:
      fulfillment: &fulfillment
        type: 
          $ref: "./fulfillments.yaml#/fulfillments/type"
on_search:
  message:
    catalog:
      "bpp/fulfillments": *fulfillment
      "bpp/providers":
        fulfillments: *fulfillment
        items:
          quantity:
            unitized: &measure
              $ref: "./measure.yaml"
            available: *measure
            maximum: *measure
        offers:
          $ref: "./offers.yaml#/offers"
select:
  context: *context
  message:
    order: &order
      fulfillments: *fulfillment
on_select:
  context: *context
  message:
    order: *order
init:
  context: *context
  message:
    order: *order
on_init:
  context: *context
  message:
    order: *order
confirm:
  context: *context
  message:
    order: *order
on_confirm:
  context: *context
  message:
    order: *order
status:
  context: *context
on_status:
  context: *context
  message:
    order: *order
cancel:
  context: *context
on_cancel:
  context: *context
  message:
    order: *order
track:
  context: *context
on_track:
  context: *context